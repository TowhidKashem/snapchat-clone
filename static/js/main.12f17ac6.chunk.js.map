{"version":3,"sources":["AppShell/duck.ts","utils/system.ts","features/User/duck.ts","features/SnapMap/utils.ts","features/SnapMap/data.ts","features/SnapMap/duck.ts","features/Snap/duck.ts","features/Chat/duck.ts","features/Camera/duck.ts","AppShell/utils.ts","common/Icon/index.tsx","AppShell/Toolbar/index.tsx","common/Button/index.tsx","AppShell/Footer/index.tsx","utils/animation.ts","common/Widget/index.tsx","common/Pod/ActionItem/index.tsx","common/Loader/index.tsx","features/Account/Map/index.tsx","features/Account/index.tsx","common/Input/index.tsx","common/Avatar/index.tsx","common/Pod/User/index.tsx","features/Search/index.tsx","utils/string.ts","features/SnapMap/Header/index.tsx","features/SnapMap/index.tsx","features/Snap/index.tsx","utils/time.ts","common/Header/index.tsx","features/Archive/index.tsx","features/Chat/data.ts","utils/array.ts","utils/audio.ts","common/Pill/index.tsx","features/Chat/index.tsx","common/SkeletonFrame/index.tsx","common/Pod/Spotlight/index.tsx","features/Discover/index.tsx","utils/viewport.ts","AppShell/Drawer/index.tsx","AppShell/index.tsx","features/Camera/PhotoCapture/index.tsx","utils/browser.ts","features/Camera/index.tsx","features/404/index.tsx","index.tsx"],"names":["showDrawer","drawer","dispatch","type","show","animationIn","animationOut","animationInDuration","animationOutDuration","theme","position","hideDrawer","component","setFooterType","footerType","initialState","drawers","setShowDrawer","prevState","minusCurrentDrawer","filter","setHideDrawer","map","drawersOpen","lastDrawerOpen","length","api","baseURL","get","endpoint","external","respond","post","options","put","patch","delete","method","data","a","url","headers","Headers","body","JSON","stringify","fetch","response","json","promise","then","Error","catch","err","sleep","milliseconds","Promise","resolve","setTimeout","session","friends","geolocation","abbrConditionMap","sn","sl","h","t","s","c","hr","lr","hc","lc","conditionIconMap","snow","sleet","hail","thunderstorm","showers","clear","snaps","weather","addSnap","snap","thread","messages","photoTaken","photos","setPhoto","dataURL","photoCopy","images","unshift","date","Date","month","toLocaleString","year","getFullYear","atleastOneDrawerOpen","some","iconMap","faSnapchatSquare","faGithub","faCircle","faCamera","faUserPlus","faListAlt","faGrinBeam","faAngleRight","faCompass","faUserCircle","faSearch","faRetweet","faAngleDown","faLocationArrow","faSignal","faBatteryHalf","faCommentAlt","faMobile","faMobileAlt","faDot","faLaugh","faSmileWink","faEllipsisV","faEllipsisH","faCog","faTimesCircle","faTimes","faAngleLeft","faSearchPlus","faPaw","faSpider","faWater","faPhoneAlt","faVideo","faRocket","faMicrophone","faDownload","faTextHeight","faPen","faStickyNote","faCut","faPaperclip","faCropAlt","faStopwatch","faExternalLinkAlt","faPlayCircle","faEdit","faMagic","faQrcode","faSnowflake","faIcicles","faCloudMeatball","faPooStorm","faCloudShowersHeavy","faCloudRain","faCloud","faCloudSun","faSun","Icon","icon","onClick","className","classNames","Toolbar","useState","React","useEffect","time","setTime","updateTime","navigator","language","toLocaleTimeString","hour","minute","replace","setInterval","dark","Button","image","icons","iconClass","iconClasses","buttonClass","round","plain","purple","label","onclick","src","alt","index","key","Footer","isVisible","animateOnMount","onAnimationComplete","callback","Widget","header","children","transparent","ActionItem","leftIcon","rightIcon","straightEdge","Loader","fixed","message","pieces","Array","fill","val","apiKey","process","hasApiKey","mapboxgl","accessToken","Map","getGeoLocation","setLatLon","mapRef","useRef","loading","setLoading","error","lat","lon","loadMap","dummyResponse","getCurrentPosition","coords","latitude","longitude","maximumAge","Infinity","timeout","enableHighAccuracy","container","current","style","center","zoom","interactive","on","tooltip","document","createElement","Marker","setLngLat","addTo","role","aria-label","href","target","rel","ref","connect","user","country_name","state","city","postal","country","zip","username","Input","placeholder","value","onFocus","onBlur","onChange","onEnter","focus","spellCheck","animate","inputElem","full","setFull","disabled","onKeyPress","sizeMap","sm","md","lg","Avatar","size","width","User","fullName","avatar","query","setQuery","pattern","RegExp","users","match","hasResults","e","currentTarget","trim","id","Header","temperature","condition","snapMap","getSnaps","location","getWeather","whereOnEarthID","woeid","consolidated_weather","the_temp","weather_state_abbr","celsius","Math","mapElem","setMap","classList","add","Popup","closeOnClick","setHTML","addSelfMarker","flyTo","marker","remove","addSnapToMap","removeSnap","caption","videoElem","load","play","closeSnap","timestamp","formatter","Intl","RelativeTimeFormat","numeric","ms","now","years","ceil","format","months","days","hours","minutes","seconds","relativeTime","playsInline","onEnded","insideDrawer","iconImage","camera","openPhoto","dummyMessages","randomArrayVal","arr","floor","random","playSound","sound","audioElem","newAppMessage","cameraShutter","Pill","chat","getMessages","postMessage","author","messageContainer","setMessage","typing","setTyping","useLayoutEffect","scrollTop","scrollHeight","botResponse","useCallback","submitMessage","other","SkeletonFrame","count","nums","num","Spotlight","title","profiles","setProfiles","page","setPage","loadMore","isFetching","prevProfiles","discover","querySelector","addEventListener","func","wait","args","later","clearTimeout","debounce","elem","fullyVisible","getBoundingClientRect","elemTop","top","elemBottom","bottom","window","innerHeight","elemInView","prevPage","Drawer","getElementById","height","account","search","archive","getComponent","app","media","getSession","getFriends","getPhotos","PhotoCapture","takePic","closePic","pickPhoto","canvasElem","documentElement","viewportHeight","setProperty","stretchViewPortHeight","getDataURL","toDataURL","innerWidth","context","getContext","canvas","drawImage","takePhoto","hide","test","userAgent","MSStream","open","defaultFilters","showFilterButtons","setShowFilterButtons","filters","setFilters","activeFilter","setActiveFilter","filterInitialized","setFilterInitialized","cameraStream","setCameraStream","setTakePic","startCamera","maxWidth","offsetWidth","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","reject","call","video","facingMode","ideal","srcObject","alert","Filters","init","getTracks","forEach","track","stop","setActiveFilterButton","selectFilter","newFilters","splice","switchFilter","JEEFACEFILTERAPI","destroy","includes","muted","autoPlay","NotFound","to","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","App","StrictMode","path","exact","Camera","ReactDOM","render"],"mappings":"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","file":"static/js/main.12f17ac6.chunk.js","sourcesContent":["import { Drawer, FooterType } from 'AppShell/types';\n\n// Action types\nconst SHOW_DRAWER = 'app/showDrawer';\nconst HIDE_DRAWER = 'app/hideDrawer';\nconst SET_FOOTER_TYPE = 'app/setFooterType';\n\n// Action creators\nexport const showDrawer = (drawer: Drawer) => (dispatch) => {\n  const defaults = {\n    show: true,\n    animationIn: 'slideInUp',\n    animationOut: 'slideOutDown',\n    animationInDuration: 300,\n    animationOutDuration: 300,\n    theme: 'light',\n    position: 'front'\n  };\n  dispatch({\n    type: SHOW_DRAWER,\n    drawer: { ...defaults, ...drawer }\n  });\n};\n\nexport const hideDrawer = (component: string) => (dispatch) =>\n  dispatch({ type: HIDE_DRAWER, component });\n\nexport const setFooterType = (footerType: FooterType) => (dispatch) =>\n  dispatch({ type: SET_FOOTER_TYPE, footerType });\n\n// Reducer\nconst initialState = {\n  footerType: 'full',\n  drawers: [\n    // {\n    //   animationIn: 'zoomIn',\n    //   animationOut: 'zoomOut',\n    //   animationInDuration: 300,\n    //   animationOutDuration: 300,\n    //   theme: 'stripped',\n    //   component: 'snapMap',\n    //   position: 'front',\n    //   show: true\n    // }\n  ]\n};\n\nconst setShowDrawer = (prevState, drawer) => {\n  const minusCurrentDrawer = prevState.drawers.filter(\n    ({ component }) => component !== drawer.component\n  );\n  return {\n    ...prevState,\n    drawers: [...minusCurrentDrawer, drawer]\n  };\n};\n\nconst setHideDrawer = (prevState, component) => {\n  let drawers;\n  // Close select drawer\n  if (component) {\n    drawers = prevState.drawers.map((drawer) => {\n      if (drawer.component === component) return { ...drawer, show: false };\n      return drawer;\n    });\n  }\n  // Close all drawers\n  else {\n    const drawersOpen = prevState.drawers.filter(({ show }) => show);\n    const lastDrawerOpen = drawersOpen[drawersOpen.length - 1].component;\n    // Close all drawers but show exit animation only on the last opened one\n    if (drawersOpen.length > 1) {\n      drawers = prevState.drawers.map((drawer) => {\n        if (drawer.component === lastDrawerOpen) {\n          return { ...drawer, show: false };\n        }\n        return {\n          ...drawer,\n          show: false,\n          animationOutDuration: 0\n        };\n      });\n    } else {\n      drawers = prevState.drawers.map((drawer) => ({\n        ...drawer,\n        show: false\n      }));\n    }\n  }\n  return { ...prevState, drawers };\n};\n\nexport default function reducer(\n  prevState = initialState,\n  { type, drawer, component, footerType }\n) {\n  switch (type) {\n    case SHOW_DRAWER:\n      return setShowDrawer(prevState, drawer);\n    case HIDE_DRAWER:\n      return setHideDrawer(prevState, component);\n    case SET_FOOTER_TYPE:\n      return { ...prevState, footerType };\n    default:\n      return prevState;\n  }\n}\n","export const api = {\n  baseURL: '/api',\n  get: (endpoint, external = false) => api.respond('get', endpoint, null, external),\n  post: (endpoint, options) => api.respond('post', endpoint, options),\n  put: (endpoint, options) => api.respond('put', endpoint, options),\n  patch: (endpoint, options) => api.respond('patch', endpoint, options),\n  delete: (endpoint) => api.respond('delete', endpoint),\n  respond: async (method, endpoint, data?, external?) => {\n    const url = external ? endpoint : api.baseURL + endpoint;\n    const options = data\n      ? {\n          headers: new Headers({ 'Content-Type': 'application/json' }),\n          body: JSON.stringify(data)\n        }\n      : {};\n    try {\n      const response = await fetch(url, { method, ...options });\n      const data = await response.json();\n      return [null, data];\n    } catch (error) {\n      return [error];\n    }\n  }\n};\n\n// Helper to remove async/await try/catch litter\n// https://gist.github.com/DavidWells/54f9dd1af4a489e5f1358f33ce59e8ad\nexport const promise = (promise: Promise<[boolean, any]>) =>\n  promise\n    .then((data) => {\n      if (data instanceof Error) return [data];\n      return [null, data];\n    })\n    .catch((err) => [err]);\n\n// https://levelup.gitconnected.com/debounce-in-javascript-improve-your-applications-performance-5b01855e086\nexport const debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      timeout = null;\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\nexport const sleep = (milliseconds) =>\n  new Promise((resolve) => setTimeout(resolve, milliseconds));\n","import { api } from 'utils/system';\n\n// Action types\nconst SESSION_FETCHED = 'user/sessionFetched';\nconst FRIENDS_FETCHED = 'user/friendsFetched';\nconst GEO_LOCATION_FETCHED = 'user/geoLocationFetched';\nconst SET_LAT_LON = 'user/setLatLon';\n\n// Action creators\nexport const getSession = () => async (dispatch) => {\n  const [error, response] = await api.get('/session.json');\n\n  if (!error)\n    dispatch({\n      type: SESSION_FETCHED,\n      user: response\n    });\n};\n\nexport const getFriends = () => async (dispatch) => {\n  const [error, response] = await api.get('/friends.json');\n\n  if (!error)\n    dispatch({\n      type: FRIENDS_FETCHED,\n      users: response.users\n    });\n};\n\nexport const getGeoLocation = () => async (dispatch) => {\n  const [error, response] = await api.get('https://geolocation-db.com/json/', true);\n\n  if (error) return [true];\n\n  const { country_name, state, city, postal, latitude, longitude } = response;\n\n  dispatch({\n    type: GEO_LOCATION_FETCHED,\n    geolocation: {\n      country: country_name,\n      state,\n      city,\n      zip: postal,\n      latitude,\n      longitude\n    }\n  });\n\n  return [false, { latitude, longitude }];\n};\n\nexport const setLatLon = (latitude, longitude) => (dispatch) =>\n  dispatch({\n    type: SET_LAT_LON,\n    geolocation: {\n      latitude,\n      longitude\n    }\n  });\n\n// Reducer\nconst initialState = {\n  session: {},\n  friends: [],\n  geolocation: {}\n};\n\nexport default function reducer(\n  prevState = initialState,\n  { type, user, users, geolocation }\n) {\n  switch (type) {\n    case SESSION_FETCHED:\n      return { ...prevState, session: user };\n    case FRIENDS_FETCHED:\n      return { ...prevState, friends: users };\n    case GEO_LOCATION_FETCHED:\n    case SET_LAT_LON:\n      return { ...prevState, geolocation };\n    default:\n      return prevState;\n  }\n}\n","export const celsiusToFahrenheit = (celsius: number): number =>\n  Math.round(celsius * 1.8 + 32);\n","export const abbrConditionMap = {\n  sn: 'snow',\n  sl: 'sleet',\n  h: 'hail',\n  t: 'thunderstorm',\n  s: 'showers',\n  c: 'clear',\n  hr: 'heavy-rain',\n  lr: 'light-rain',\n  hc: 'heavy-cloud',\n  lc: 'light-cloud'\n};\n\nexport const conditionIconMap = {\n  snow: 'faSnowflake',\n  sleet: 'faIcicles',\n  hail: 'faCloudMeatball',\n  thunderstorm: 'faPooStorm',\n  showers: 'faCloudShowersHeavy',\n  clear: 'faSun',\n  'heavy-rain': 'faCloudShowersHeavy',\n  'light-rain': 'faCloudRain',\n  'heavy-cloud': 'faCloud',\n  'light-cloud': 'faCloudSun'\n};\n","import { api } from 'utils/system';\nimport { celsiusToFahrenheit } from './utils';\nimport { abbrConditionMap } from './data';\n\n// Action types\nexport const SNAPS_FETCHED = 'snapMap/snapsFetched';\nexport const WEATHER_FETCHED = 'snapMap/weatherFetched';\n\n// Action creators\nexport const getSnaps = (lat, lon, city, state) => async (dispatch) => {\n  const [error, response] = await api.get(`/snaps.json?geo=${lat},${lon}`);\n\n  if (!error) {\n    // Set some dummy coordinates to make snaps seem close to user\n    const coords = [\n      {\n        lat: lat + 0.007,\n        lon: lon - 0.007\n      },\n      {\n        lat: lat + 0.009,\n        lon: lon + 0.005\n      },\n      {\n        lat: lat + 0.006,\n        lon: lon - 0.001\n      },\n      {\n        lat: lat - 0.005,\n        lon: lon - 0.002\n      },\n      {\n        lat: lat - 0.001,\n        lon: lon - 0.005\n      },\n      {\n        lat: lat + 0.005,\n        lon: lon - -0.006\n      },\n      {\n        lat: lat - 0.01,\n        lon: lon + 0.002\n      },\n      {\n        lat: lat - 0.01,\n        lon: lon - 0.007\n      },\n      {\n        lat: lat - 0.005,\n        lon: lon + 0.005\n      },\n      {\n        lat: lat,\n        lon: lon + 0.004\n      }\n    ];\n\n    const snaps = response.snaps.map((snap, index) => ({\n      ...snap,\n      location: `${city}, ${state}`,\n      lat: coords[index].lat,\n      lon: coords[index].lon\n    }));\n\n    dispatch({ type: SNAPS_FETCHED, snaps });\n  }\n};\n\nexport const getWeather = (lat, lon) => async (dispatch) => {\n  const baseURL =\n    'https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location';\n\n  // If fetching the user's actual weather fails below for some reason\n  // store this dummy data for purposes of the demo\n  let weather = {\n    temperature: 75,\n    condition: 'c'\n  };\n\n  let [error, response] = await api.get(\n    `${baseURL}/search/?lattlong=${lat},${lon}`,\n    true\n  );\n\n  if (!error) {\n    const whereOnEarthID = response[0]?.woeid;\n    [error, response] = await api.get(`${baseURL}/${whereOnEarthID}/`, true);\n\n    if (!error) {\n      const { the_temp, weather_state_abbr } = response?.consolidated_weather[0];\n\n      weather = {\n        temperature: celsiusToFahrenheit(the_temp),\n        condition: abbrConditionMap[weather_state_abbr]\n      };\n    }\n  }\n\n  dispatch({ type: WEATHER_FETCHED, weather });\n};\n\n// Reducer\nconst initialState = {\n  snaps: [],\n  weather: {}\n};\n\nexport default function reducer(prevState = initialState, { type, snaps, weather }) {\n  switch (type) {\n    case SNAPS_FETCHED:\n      return { ...prevState, snaps };\n    case WEATHER_FETCHED:\n      return { ...prevState, weather };\n    default:\n      return prevState;\n  }\n}\n","import { Snap } from './types';\n\n// Action types\nexport const ADD_SNAP = 'snap/addSnap';\nexport const REMOVE_SNAP = 'snap/removeSnap';\n\n// Action creators\nexport const addSnap = (snap: Snap) => (dispatch) => dispatch({ type: ADD_SNAP, snap });\n\nexport const removeSnap = () => (dispatch) => dispatch({ type: REMOVE_SNAP });\n\n// Reducer\nconst initialState = {};\n\nexport default function reducer(prevState = initialState, { type, snap }) {\n  switch (type) {\n    case ADD_SNAP:\n      return snap;\n    case REMOVE_SNAP:\n      return {};\n    default:\n      return prevState;\n  }\n}\n","import { api } from 'utils/system';\n\n// Action types\nconst MESSAGES_RECEIVED = 'chat/messagesReceived';\nconst POST_MESSAGE = 'chat/postMessage';\n\n// Action creators\nexport const getMessages = (user) => async (dispatch) => {\n  const [error, response] = await api.get(`/messages.json?thread=${user}`);\n\n  if (!error) {\n    dispatch({\n      type: MESSAGES_RECEIVED,\n      messages: [\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages,\n        ...response.messages\n      ]\n    });\n  }\n};\n\nexport const postMessage = (author, message) => (dispatch) =>\n  dispatch({\n    type: POST_MESSAGE,\n    message: {\n      author,\n      message,\n      time: Date.now()\n    }\n  });\n\n// Reducer\nconst initialState = {\n  thread: 'Lisa',\n  messages: []\n};\n\nexport default function reducer(prevState = initialState, { type, messages, message }) {\n  switch (type) {\n    case MESSAGES_RECEIVED:\n      return { ...prevState, messages };\n    case POST_MESSAGE:\n      return {\n        ...prevState,\n        messages: [...prevState.messages, message]\n      };\n    default:\n      return prevState;\n  }\n}\n","import { api } from 'utils/system';\nimport { Photos } from 'features/Camera/types';\n\n// Action types\nconst PHOTOS_FETCHED = 'camera/photosFetched';\nconst SET_PHOTO = 'camera/setPhoto';\n\n// Action creators\nexport const getPhotos = () => async (dispatch) => {\n  const [error, response] = await api.get('/photos.json');\n\n  if (!error)\n    dispatch({\n      type: PHOTOS_FETCHED,\n      photos: response.photos\n    });\n};\n\nexport const pickPhoto = (dataURL) => (dispatch) =>\n  dispatch({ type: SET_PHOTO, dataURL });\n\n// Reducer\nconst initialState = {\n  photoTaken: false,\n  photos: []\n};\n\nconst setPhoto = (prevState, dataURL) => {\n  const photoCopy: Photos = [...prevState.photos];\n  if (prevState.photoTaken) {\n    photoCopy[0].images.unshift(dataURL);\n  } else {\n    const date = new Date();\n    photoCopy.unshift({\n      month: date.toLocaleString('default', { month: 'long' }),\n      year: date.getFullYear(),\n      images: [dataURL]\n    });\n  }\n  return {\n    ...prevState,\n    photoTaken: true,\n    photos: photoCopy\n  };\n};\n\nexport default function reducer(prevState = initialState, { type, photos, dataURL }) {\n  switch (type) {\n    case PHOTOS_FETCHED:\n      return { ...prevState, photos };\n    case SET_PHOTO:\n      return setPhoto(prevState, dataURL);\n    default:\n      return prevState;\n  }\n}\n","import { Drawer } from './types';\n\nexport const atleastOneDrawerOpen = (drawers: Drawer[]): boolean =>\n  drawers.some(({ show }) => show);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSnapchatSquare, faGithub } from '@fortawesome/free-brands-svg-icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\nimport {\n  faCamera,\n  faUserPlus,\n  faListAlt,\n  faGrinBeam,\n  faAngleRight,\n  faCompass,\n  faUserCircle,\n  faSearch,\n  faRetweet,\n  faAngleDown,\n  faLocationArrow,\n  faSignal,\n  faBatteryHalf,\n  faCommentAlt,\n  faMobile,\n  faMobileAlt,\n  faCircle as faDot,\n  faLaugh,\n  faSmileWink,\n  faEllipsisV,\n  faEllipsisH,\n  faCog,\n  faTimesCircle,\n  faTimes,\n  faAngleLeft,\n  faSearchPlus,\n  faPaw,\n  faSpider,\n  faWater,\n  faPhoneAlt,\n  faVideo,\n  faRocket,\n  faMicrophone,\n  faDownload,\n  faTextHeight,\n  faPen,\n  faStickyNote,\n  faCut,\n  faPaperclip,\n  faCropAlt,\n  faStopwatch,\n  faExternalLinkAlt,\n  faPlayCircle,\n  faEdit,\n  faMagic,\n  faQrcode,\n  faSnowflake,\n  faIcicles,\n  faCloudMeatball,\n  faPooStorm,\n  faCloudShowersHeavy,\n  faCloudRain,\n  faCloud,\n  faCloudSun,\n  faSun\n} from '@fortawesome/free-solid-svg-icons';\nimport './index.scss';\n\nexport const iconMap = {\n  // free-brands-svg-icons\n  faSnapchatSquare,\n  faGithub,\n  // free-regular-svg-icons\n  faCircle,\n  // free-solid-svg-icons\n  faCamera,\n  faUserPlus,\n  faListAlt,\n  faGrinBeam,\n  faAngleRight,\n  faCompass,\n  faUserCircle,\n  faSearch,\n  faRetweet,\n  faAngleDown,\n  faLocationArrow,\n  faSignal,\n  faBatteryHalf,\n  faCommentAlt,\n  faMobile,\n  faMobileAlt,\n  faDot,\n  faLaugh,\n  faSmileWink,\n  faEllipsisV,\n  faEllipsisH,\n  faCog,\n  faTimesCircle,\n  faTimes,\n  faAngleLeft,\n  faSearchPlus,\n  faPaw,\n  faSpider,\n  faWater,\n  faPhoneAlt,\n  faVideo,\n  faRocket,\n  faMicrophone,\n  faDownload,\n  faTextHeight,\n  faPen,\n  faStickyNote,\n  faCut,\n  faPaperclip,\n  faCropAlt,\n  faStopwatch,\n  faExternalLinkAlt,\n  faPlayCircle,\n  faEdit,\n  faMagic,\n  faQrcode,\n  faSnowflake,\n  faIcicles,\n  faCloudMeatball,\n  faPooStorm,\n  faCloudShowersHeavy,\n  faCloudRain,\n  faCloud,\n  faCloudSun,\n  faSun\n};\n\ninterface Props {\n  icon: string;\n  onClick?: () => void;\n  className?: string;\n}\n\nconst Icon: React.FC<Props> = ({ icon, onClick, className = '' }) =>\n  icon ? (\n    <FontAwesomeIcon\n      icon={iconMap[icon]}\n      onClick={onClick}\n      className={classNames('icon', {\n        [className]: className\n      })}\n    />\n  ) : null;\n\nexport default Icon;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Drawer } from '../types';\nimport { atleastOneDrawerOpen } from '../utils';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\ninterface Props {\n  drawers: Drawer[];\n}\n\nconst Toolbar: React.FC<Props> = ({ drawers }) => {\n  const { useState, useEffect } = React;\n  const [time, setTime] = useState<string>('');\n\n  const updateTime = (): void => {\n    const { language = 'en-US' } = navigator;\n    const time = new Date()\n      .toLocaleTimeString(language, {\n        hour: 'numeric',\n        minute: '2-digit'\n      })\n      .replace(/AM|PM/, '');\n    setTime(time);\n  };\n\n  useEffect(() => {\n    updateTime();\n    setInterval(updateTime, 1000);\n  }, []);\n\n  return (\n    <div\n      className={classNames('toolbar', {\n        dark: atleastOneDrawerOpen(drawers)\n      })}\n    >\n      <div className=\"left\">\n        <time>{time}</time>\n        <Icon icon=\"faLocationArrow\" />\n      </div>\n      <div className=\"right\">\n        <Icon icon=\"faSignal\" />\n        <Icon icon=\"faBatteryHalf\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Toolbar;\n","import React from 'react';\nimport classNames from 'classnames';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\ninterface Props {\n  image?: string;\n  icon?: string;\n  icons?: string[];\n  iconClass?: string;\n  iconClasses?: Array<string | null>;\n  buttonClass?: string;\n  round?: boolean;\n  plain?: boolean;\n  purple?: boolean;\n  label?: string;\n  onclick?: () => void;\n}\n\nconst Button: React.FC<Props> = ({\n  image,\n  icon,\n  icons,\n  iconClass = '',\n  iconClasses = [],\n  buttonClass = '',\n  round,\n  plain,\n  purple,\n  label,\n  onclick\n}) => (\n  <button\n    type=\"button\"\n    onClick={onclick}\n    className={classNames('btn', {\n      [buttonClass]: buttonClass,\n      round,\n      plain,\n      purple\n    })}\n  >\n    {image ? (\n      <img src={image} alt=\"\" />\n    ) : icons ? (\n      icons.map((icon, index) => (\n        <Icon\n          key={index}\n          icon={icon}\n          className={classNames({\n            [iconClasses[index] as string]: iconClasses[index]\n          })}\n        />\n      ))\n    ) : icon ? (\n      <Icon\n        icon={icon}\n        className={classNames({\n          [iconClass]: iconClass\n        })}\n      />\n    ) : null}\n    {label && <strong>{label}</strong>}\n  </button>\n);\n\nexport default Button;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Animated } from 'react-animated-css';\nimport {\n  Drawer,\n  ShowDrawer,\n  HideDrawer,\n  FooterType,\n  SetFooterType\n} from 'AppShell/types';\nimport { atleastOneDrawerOpen } from 'AppShell/utils';\nimport Button from 'common/Button';\nimport './index.scss';\n\ninterface Props {\n  footerType: FooterType;\n  setFooterType: SetFooterType;\n  drawers: Drawer[];\n  showDrawer: ShowDrawer;\n  hideDrawer: HideDrawer;\n}\n\nconst Footer: React.FC<Props> = ({\n  footerType,\n  setFooterType,\n  drawers,\n  showDrawer,\n  hideDrawer\n}) =>\n  footerType !== 'none' ? (\n    <footer\n      className={classNames('footer', {\n        'light-shadow': atleastOneDrawerOpen(drawers)\n      })}\n    >\n      <div className=\"left\">\n        <Button\n          icons={['faCommentAlt', 'faDot']}\n          iconClasses={[null, 'new-msg']}\n          buttonClass=\"btn-chat\"\n          label=\"Chat\"\n          onclick={() =>\n            showDrawer({\n              component: 'chat',\n              animationIn: 'slideInLeft',\n              animationOut: 'slideOutLeft',\n              theme: 'stripped'\n            })\n          }\n        />\n      </div>\n      <div className=\"center\">\n        <Animated\n          animationIn=\"zoomIn\"\n          animationOut=\"zoomOut\"\n          animationInDuration={500}\n          animationOutDuration={500}\n          isVisible={footerType === 'collapsed'}\n          animateOnMount={false}\n        >\n          <Button\n            icon=\"faCircle\"\n            buttonClass=\"btn-capture\"\n            onclick={() => {\n              setFooterType('full');\n              hideDrawer();\n            }}\n          />\n        </Animated>\n        <Animated\n          animationIn=\"zoomIn\"\n          animationOut=\"zoomOut\"\n          animationInDuration={500}\n          animationOutDuration={500}\n          isVisible={footerType === 'full'}\n          animateOnMount={false}\n        >\n          <Button\n            icons={['faMobile', 'faMobileAlt']}\n            buttonClass=\"archive-btn\"\n            onclick={() => {\n              setFooterType('collapsed');\n              showDrawer({\n                component: 'archive',\n                animationIn: 'slideInUp',\n                animationOut: 'slideOutDown',\n                position: 'back'\n              });\n            }}\n          />\n        </Animated>\n      </div>\n      <div className=\"right\">\n        <Button\n          icons={['faMobile', 'faMobile']}\n          buttonClass=\"discover-btn\"\n          label=\"Discover\"\n          onclick={() => {\n            setFooterType('collapsed');\n            showDrawer({\n              component: 'discover',\n              animationIn: 'slideInRight',\n              animationOut: 'slideOutRight',\n              position: 'back'\n            });\n          }}\n        />\n      </div>\n    </footer>\n  ) : null;\n\nexport default Footer;\n","// Run a callback function after an animation transition is complete\n// This is to prevent frame choppiness which happens if running too many things at once during the animation\n// 300ms is the default animation in and out duration on drawers so it's also the default here\nexport const onAnimationComplete = (callback, animationInDuration = 300) =>\n  setTimeout(callback, animationInDuration);\n","import React from 'react';\nimport classNames from 'classnames';\nimport './index.scss';\n\ninterface Props {\n  header: string;\n  children: JSX.Element | JSX.Element[];\n  className?: string;\n  transparent?: boolean;\n}\n\nconst Widget: React.FC<Props> = ({ header, children, className = '', transparent }) => (\n  <section\n    className={classNames('widget', {\n      [className]: className\n    })}\n  >\n    <header>{header}</header>\n    <div className={classNames('inner-content', { transparent })}>{children}</div>\n  </section>\n);\n\nexport default Widget;\n","import React from 'react';\nimport classNames from 'classnames';\nimport Icon from 'common/Icon';\nimport Button from 'common/Button';\nimport './index.scss';\n\ninterface Props {\n  leftIcon: string;\n  rightIcon: string;\n  label: string;\n  straightEdge?: boolean;\n}\n\nconst ActionItem: React.FC<Props> = ({ leftIcon, rightIcon, label, straightEdge }) => (\n  <article\n    className={classNames('pod', 'action-item', {\n      'straight-edge': straightEdge\n    })}\n  >\n    <Icon icon={leftIcon} className=\"ico-left\" />\n    {label}\n    <Button icon={rightIcon} buttonClass=\"ico-right\" />\n  </article>\n);\n\nexport default ActionItem;\n","import React from 'react';\nimport classNames from 'classnames';\nimport './index.scss';\n\ninterface Props {\n  fixed?: boolean;\n  message?: string;\n}\n\nconst Loader: React.FC<Props> = ({ fixed, message }) => {\n  const pieces = new Array(9).fill(null);\n  return (\n    <div className={classNames('loading', { fixed })}>\n      <div className=\"center\">\n        <div className=\"sk-cube-grid\">\n          {pieces.map((val, index) => (\n            <div key={index} className={'sk-cube sk-cube' + index}></div>\n          ))}\n        </div>\n        {message && <span>{message}</span>}\n      </div>\n    </div>\n  );\n};\n\nexport default Loader;\n","import React, { useRef, useState, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport { ShowDrawer } from 'AppShell/types';\nimport { SetLatLon, GetGeoLocation } from 'features/User/types';\nimport Loader from 'common/Loader';\nimport './index.scss';\n\ninterface Props {\n  showDrawer: ShowDrawer;\n  getGeoLocation: GetGeoLocation;\n  setLatLon: SetLatLon;\n}\n\nconst apiKey = process.env.REACT_APP_MAP_BOX_API_KEY;\nconst hasApiKey = apiKey?.length ? true : false;\n//const hasApiKey = false;\nif (hasApiKey) mapboxgl.accessToken = apiKey as string;\n\nconst Map: React.FC<Props> = ({ showDrawer, getGeoLocation, setLatLon }) => {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!hasApiKey) return;\n\n    (async () => {\n      // Attempt to get the user's geo location via this endpoint `https://geolocation-db.com/json/` (IP based)\n      // if it fails ask the user for their location via the `navigator.geolocation` API (much slower)\n      const [error, response] = await getGeoLocation();\n\n      if (!error) {\n        loadMap(response.latitude, response.longitude);\n      } else {\n        const respond = (lat, lon) => {\n          loadMap(lat, lon);\n          setLatLon(lat, lon);\n        };\n\n        // If the browser doesn't support geolocation or the call failed\n        // set a dummy location for purposes of the demo (Times Sq, NYC)\n        const dummyResponse = () => respond(40.75491, -73.994102);\n\n        if ('geolocation' in navigator) {\n          navigator.geolocation.getCurrentPosition(\n            ({ coords }) => {\n              respond(coords.latitude, coords.longitude);\n            },\n            (err) => {\n              dummyResponse();\n            },\n            {\n              maximumAge: Infinity,\n              timeout: 5000,\n              enableHighAccuracy: true\n            }\n          );\n        } else {\n          dummyResponse();\n        }\n      }\n    })();\n  }, [getGeoLocation, setLatLon]);\n\n  const loadMap = (lat, lon) => {\n    const map = new mapboxgl.Map({\n      container: mapRef.current as HTMLDivElement,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [lon, lat],\n      zoom: 13,\n      interactive: false\n    }).on('load', () => {\n      setLoading(false);\n      // Add self marker\n      const tooltip = document.createElement('div');\n      tooltip.className = 'self-marker';\n      new mapboxgl.Marker(tooltip).setLngLat([lon, lat]).addTo(map);\n    });\n  };\n\n  return (\n    <div\n      className=\"preview-map\"\n      onClick={() =>\n        hasApiKey &&\n        showDrawer({\n          component: 'snapMap',\n          animationIn: 'fadeIn',\n          animationOut: 'fadeOut',\n          animationInDuration: 0,\n          animationOutDuration: 0,\n          theme: 'stripped'\n        })\n      }\n    >\n      {!hasApiKey ? (\n        <div className=\"api-key-msg\">\n          <p>\n            <span role=\"img\" aria-label=\"earth emoji\">\n              \n            </span>{' '}\n            Get a free mapboxgl{' '}\n            <a\n              href=\"https://docs.mapbox.com/help/how-mapbox-works/access-tokens/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              API key here\n            </a>\n            , then add it to the <code>.env</code> file and run <code>npm start</code>{' '}\n            again to view the snap map features!\n          </p>\n        </div>\n      ) : loading ? (\n        <Loader />\n      ) : null}\n\n      {hasApiKey && <div className=\"map\" ref={mapRef}></div>}\n    </div>\n  );\n};\n\nexport default Map;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { User } from 'features/User/types';\nimport { ShowDrawer, HideDrawer } from 'AppShell/types';\nimport { showDrawer, hideDrawer } from 'AppShell/duck';\nimport { SetLatLon, GetGeoLocation } from 'features/User/types';\nimport { getGeoLocation, setLatLon } from 'features/User/duck';\nimport Button from 'common/Button';\nimport Widget from 'common/Widget';\nimport ActionItem from 'common/Pod/ActionItem';\nimport Icon from 'common/Icon';\nimport Map from './Map';\nimport './index.scss';\n\ninterface Props {\n  showDrawer: ShowDrawer;\n  hideDrawer: HideDrawer;\n  session: User;\n  getGeoLocation: GetGeoLocation;\n  setLatLon: SetLatLon;\n}\n\nconst Account: React.FC<Props> = ({\n  showDrawer,\n  hideDrawer,\n  session,\n  getGeoLocation,\n  setLatLon\n}) => (\n  <main className=\"account\">\n    <header>\n      <Button\n        icon=\"faAngleDown\"\n        onclick={() => hideDrawer('account')}\n        buttonClass=\"btn-close\"\n      />\n      <Icon icon=\"faCog\" className=\"ico-gear\" />\n    </header>\n    <div className=\"logo\">\n      <Icon icon=\"faSnapchatSquare\" className=\"ico-brand\" />\n      <strong>{session.username}</strong>\n    </div>\n    <Widget header=\"Stories\" transparent>\n      <ActionItem leftIcon=\"faCamera\" rightIcon=\"faEllipsisV\" label=\"Add to My Story\" />\n      <ActionItem leftIcon=\"faCamera\" rightIcon=\"faEllipsisV\" label=\"Add to Our Story\" />\n    </Widget>\n    <Widget header=\"Friends\" transparent>\n      <ActionItem leftIcon=\"faUserPlus\" rightIcon=\"faAngleRight\" label=\"Add Friends\" />\n      <ActionItem leftIcon=\"faListAlt\" rightIcon=\"faAngleRight\" label=\"My Friends\" />\n    </Widget>\n    <Widget header=\"Bitmoji\" transparent>\n      <ActionItem leftIcon=\"faGrinBeam\" rightIcon=\"faAngleRight\" label=\"Create Bitmoji\" />\n    </Widget>\n    <Widget header=\"Snap Map\">\n      <Map\n        getGeoLocation={getGeoLocation}\n        setLatLon={setLatLon}\n        showDrawer={showDrawer}\n      />\n      <ActionItem\n        leftIcon=\"faCompass\"\n        rightIcon=\"faAngleRight\"\n        label=\"Set a Status\"\n        straightEdge\n      />\n    </Widget>\n    <footer>\n      <p>\n        <a\n          href=\"https://github.com/TowhidKashem/react-snapchat-clone\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Icon icon=\"faGithub\" /> Github Repo\n        </a>\n      </p>\n    </footer>\n  </main>\n);\n\nconst mapStateToProps = ({ user }) => ({\n  session: user.session\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  showDrawer: (drawer) => dispatch(showDrawer(drawer)),\n  hideDrawer: (component) => dispatch(hideDrawer(component)),\n  getGeoLocation: () => dispatch(getGeoLocation()),\n  setLatLon: (lat, lon) => dispatch(setLatLon(lat, lon))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);\n","import React, { useRef, useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { onAnimationComplete } from 'utils/animation';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\ninterface Props {\n  placeholder: string;\n  value?: string;\n  leftIcon?: string;\n  rightIcon?: string;\n  onClick?: () => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  onChange?: (e: React.SyntheticEvent<HTMLInputElement>) => void;\n  onEnter?: () => void;\n  focus?: boolean;\n  spellCheck?: boolean;\n  animate?: boolean;\n  dark?: boolean;\n}\n\nconst Input: React.FC<Props> = ({\n  placeholder,\n  value,\n  leftIcon,\n  rightIcon,\n  onClick,\n  onFocus,\n  onBlur,\n  onChange,\n  onEnter,\n  focus,\n  spellCheck,\n  animate,\n  dark\n}) => {\n  const inputElem = useRef<HTMLInputElement>(null);\n  const [full, setFull] = useState(false);\n\n  useEffect(() => {\n    if (animate) setFull(true);\n    onAnimationComplete(() => {\n      if (focus) inputElem?.current?.focus();\n    });\n  }, [animate, focus]);\n\n  const disabled = onClick ? true : false;\n\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('input', { animate, full, disabled, dark })}\n    >\n      {leftIcon && <Icon icon={leftIcon} className=\"left-icon\" />}\n      <input\n        type=\"text\"\n        ref={inputElem}\n        placeholder={placeholder}\n        value={value}\n        onClick={onClick}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        onChange={onChange}\n        onKeyPress={({ key }) => onEnter && key === 'Enter' && onEnter()}\n        disabled={disabled}\n        spellCheck={spellCheck || false}\n        className={classNames({\n          'has-left-icon': leftIcon\n        })}\n      />\n      {rightIcon && <Icon icon={rightIcon} className=\"right-icon\" />}\n    </div>\n  );\n};\n\nexport default Input;\n","import React from 'react';\nimport './index.scss';\n\nexport type sizeType = 'sm' | 'md' | 'lg';\n\ninterface Props {\n  src: string;\n  size?: sizeType;\n}\n\nexport const sizeMap = {\n  sm: 45,\n  md: 100,\n  lg: 150\n};\n\nconst Avatar: React.FC<Props> = ({ src, size = 'md' }) => (\n  <img src={src} className=\"avatar\" alt=\"\" width={sizeMap[size]} />\n);\n\nexport default Avatar;\n","import React from 'react';\nimport { User as UserInterface } from 'features/User/types';\nimport Avatar from 'common/Avatar';\nimport './index.scss';\n\ninterface Props {\n  user: UserInterface;\n}\n\nconst User: React.FC<Props> = ({ user }) => {\n  const { username, fullName, avatar } = user;\n  return (\n    <article className=\"pod user\">\n      <Avatar src={avatar} size=\"sm\" />\n      <div className=\"meta\">\n        <header>{fullName}</header>\n        <span>{username}</span>\n      </div>\n    </article>\n  );\n};\n\nexport default User;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Animated } from 'react-animated-css';\nimport { HideDrawer } from 'AppShell/types';\nimport { User } from 'features/User/types';\nimport { hideDrawer } from 'AppShell/duck';\nimport { escapeRegex } from 'utils/string';\nimport Input from 'common/Input';\nimport Button from 'common/Button';\nimport Widget from 'common/Widget';\nimport UserPod from 'common/Pod/User';\nimport './index.scss';\n\ninterface Props {\n  friends: User[];\n  show: boolean;\n  hideDrawer: HideDrawer;\n}\n\nconst Search: React.FC<Props> = ({ friends = [], show, hideDrawer }) => {\n  const [query, setQuery] = useState('');\n\n  useEffect(() => {\n    if (!show) setQuery('');\n  }, [show]);\n\n  const pattern = new RegExp(escapeRegex(query), 'gi');\n  const users = query\n    ? friends.filter(\n        ({ fullName, username }) => fullName.match(pattern) || username.match(pattern)\n      )\n    : friends;\n  const hasResults = users.length > 0;\n\n  return (\n    <main className=\"search\">\n      <header>\n        <form>\n          <Input\n            placeholder=\"Search\"\n            leftIcon=\"faSearch\"\n            value={query}\n            onChange={(e) => setQuery(e.currentTarget.value.trim())}\n            focus={show}\n            animate\n            dark\n          />\n          <Button label=\"Cancel\" plain onclick={() => hideDrawer('search')} />\n        </form>\n      </header>\n      <section>\n        <Animated\n          animationIn=\"slideInUp\"\n          animationOut=\"slideOutDown\"\n          animationInDuration={250}\n          animationOutDuration={0}\n          isVisible={show}\n        >\n          <div className=\"results\">\n            {hasResults && (\n              <Widget header=\"Quick Add\">\n                {users.map((user) => (\n                  <UserPod key={user.id} user={user} />\n                ))}\n              </Widget>\n            )}\n          </div>\n          {query && !hasResults && (\n            <p className=\"no-results\">\n              <span role=\"img\" aria-label=\"poop emoji\">\n                \n              </span>{' '}\n              No results\n            </p>\n          )}\n        </Animated>\n      </section>\n    </main>\n  );\n};\n\nconst mapStateToProps = ({ user }) => ({\n  friends: user.friends\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  hideDrawer: (component) => dispatch(hideDrawer(component))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","// Escape a user input string for use in a REGEX search\nexport const escapeRegex = (string: string) =>\n  string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n","import React from 'react';\nimport { HideDrawer } from 'AppShell/types';\nimport { Weather } from '../types';\nimport { conditionIconMap } from '../data';\nimport Button from 'common/Button';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\ninterface Props {\n  weather: Weather;\n  city: string;\n  hideDrawer: HideDrawer;\n}\n\nconst Header: React.FC<Props> = ({ weather, city, hideDrawer }) => {\n  const { temperature, condition } = weather;\n  return (\n    <header className=\"weather-header\">\n      <div className=\"left\">\n        <Button\n          icon=\"faTimes\"\n          round\n          onclick={() => hideDrawer('snapMap')}\n          buttonClass=\"btn-close\"\n        />\n        <Button icon=\"faSearch\" round />\n      </div>\n      <div className=\"center\">\n        <article className=\"weather\">\n          <header>{city}</header>\n          <div className=\"condition\">\n            <Icon icon={conditionIconMap[condition]} />\n            <span className=\"temperature\">{temperature}&deg;F</span>\n          </div>\n        </article>\n      </div>\n      <div className=\"right\">\n        <Button icon=\"faCog\" round />\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport mapboxgl from 'mapbox-gl';\nimport { ShowDrawer, HideDrawer } from 'AppShell/types';\nimport { Geolocation } from 'features/User/types';\nimport { Snap, AddSnap } from 'features/Snap/types';\nimport { GetSnaps, GetWeather, Weather } from './types';\nimport { showDrawer, hideDrawer } from 'AppShell/duck';\nimport { addSnap } from 'features/Snap/duck';\nimport { getSnaps, getWeather } from './duck';\nimport { onAnimationComplete } from 'utils/animation';\nimport Header from './Header';\nimport Loader from 'common/Loader';\nimport './index.scss';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAP_BOX_API_KEY as string;\n\ninterface Props {\n  snaps: Snap[];\n  weather: Weather;\n  getSnaps: GetSnaps;\n  addSnap: AddSnap;\n  getWeather: GetWeather;\n  showDrawer: ShowDrawer;\n  hideDrawer: HideDrawer;\n  geolocation: Geolocation;\n}\n\nconst SnapMap: React.FC<Props> = ({\n  snaps,\n  weather,\n  getSnaps,\n  addSnap,\n  getWeather,\n  showDrawer,\n  hideDrawer,\n  geolocation\n}) => {\n  const { latitude, longitude, city, state } = geolocation;\n\n  const mapElem = useRef<HTMLDivElement>(null);\n\n  const [loading, setLoading] = useState(true);\n  const [map, setMap] = useState<mapboxgl.Map | null>(null);\n\n  useEffect(() => {\n    getSnaps(latitude, longitude, city, state);\n    getWeather(latitude, longitude);\n    setMap(\n      new mapboxgl.Map({\n        container: mapElem.current as HTMLDivElement,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [longitude, latitude],\n        zoom: 13\n      }).on('load', () => setLoading(false))\n    );\n  }, [getSnaps, getWeather, latitude, longitude, city, state]);\n\n  // Add self marker on map\n  useEffect(() => {\n    if (map) {\n      const addSelfMarker = () => {\n        const tooltip = document.createElement('div');\n        tooltip.className = 'self-marker';\n\n        new mapboxgl.Marker(tooltip).setLngLat([longitude, latitude]).addTo(map);\n\n        setTimeout(() => {\n          tooltip.classList.add('zoomedIn');\n\n          new mapboxgl.Popup({ closeOnClick: false })\n            .setLngLat([longitude, latitude])\n            .setHTML(\n              `<header>Me</header>\n              <p>Not Sharing Location</p>`\n            )\n            .addTo(map);\n        }, 2300);\n      };\n\n      addSelfMarker();\n\n      // Zoom in effect on load\n      setTimeout(() => map.flyTo({ zoom: 14 }), 2000);\n    }\n  }, [map, latitude, longitude]);\n\n  // Add snaps on map after they've loaded\n  useEffect(() => {\n    const addSnapToMap = (snap: Snap) => {\n      const marker = document.createElement('div');\n      marker.className = 'marker';\n      marker.onclick = function (e: any) {\n        // Show pulse animation\n        e.target.classList.add('active');\n        // Delay opening the drawer so we can see the pulse\n        onAnimationComplete(() => {\n          addSnap(snap);\n          showDrawer({\n            component: 'snap',\n            animationIn: 'zoomIn',\n            animationOut: 'zoomOut',\n            theme: 'dark'\n          });\n        }, 900);\n        // Remove pulse\n        onAnimationComplete(() => e.target.classList.remove('active'), 1000);\n      };\n      new mapboxgl.Marker(marker)\n        .setLngLat([snap.lon as number, snap.lat as number])\n        .addTo(map as mapboxgl.Map);\n    };\n\n    snaps.map((snap) => addSnapToMap(snap));\n  }, [snaps, map, addSnap, showDrawer]);\n\n  return (\n    <div className=\"snap-map\">\n      <div className=\"inner\">\n        {loading && <Loader />}\n        <Header weather={weather} city={geolocation.city} hideDrawer={hideDrawer} />\n        <div ref={mapElem} className=\"content\"></div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ snapMap, user }) => ({\n  snaps: snapMap.snaps,\n  weather: snapMap.weather,\n  geolocation: user.geolocation\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  getSnaps: (lat, lon, city, state) => dispatch(getSnaps(lat, lon, city, state)),\n  addSnap: (snap) => dispatch(addSnap(snap)),\n  getWeather: (lat, lon) => dispatch(getWeather(lat, lon)),\n  showDrawer: (drawer) => dispatch(showDrawer(drawer)),\n  hideDrawer: (component) => dispatch(hideDrawer(component))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SnapMap);\n","import React, { useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { relativeTime } from 'utils/time';\nimport { onAnimationComplete } from 'utils/animation';\nimport { Snap as SnapType } from './types';\nimport { removeSnap } from './duck';\nimport { HideDrawer } from 'AppShell/types';\nimport { hideDrawer } from 'AppShell/duck';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\ninterface Props {\n  snap: SnapType;\n  removeSnap: () => void;\n  hideDrawer: HideDrawer;\n}\n\nconst Snap: React.FC<Props> = ({ snap, removeSnap, hideDrawer }) => {\n  const { location, time, type, url, caption } = snap;\n\n  const videoElem = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    if (type === 'video' && videoElem.current) {\n      videoElem.current.load();\n      videoElem.current.play();\n    }\n  }, [snap, type]);\n\n  const closeSnap = () => {\n    hideDrawer('snap');\n    onAnimationComplete(() => removeSnap());\n  };\n\n  return (\n    <main className=\"snap\" onClick={closeSnap}>\n      <header>\n        {location && time && (\n          <div className=\"left\">\n            {location}\n            <time>{relativeTime(time)}</time>\n          </div>\n        )}\n        <div className=\"right\">\n          <Icon icon=\"faEllipsisV\" />\n        </div>\n      </header>\n      {type === 'video' ? (\n        <div className=\"video-container\">\n          <video ref={videoElem} playsInline onEnded={closeSnap}>\n            <source src={url} type=\"video/mp4\" />\n          </video>\n        </div>\n      ) : (\n        <div className=\"image-container\">\n          {caption && <div className=\"caption\">{caption}</div>}\n          <img src={url} alt=\"\" />\n        </div>\n      )}\n    </main>\n  );\n};\n\nconst mapStateToProps = ({ snap }) => ({ snap });\n\nconst mapDispatchToProps = (dispatch) => ({\n  removeSnap: () => dispatch(removeSnap()),\n  hideDrawer: (component) => dispatch(hideDrawer(component))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Snap);\n","// Pollyfill (mobile safari doesn't support `Intl.RelativeTimeFormat` at the moment)\nimport '@formatjs/intl-relativetimeformat/polyfill';\nimport '@formatjs/intl-relativetimeformat/polyfill-locales';\n\n// https://gist.github.com/liamnewmarch/a345fbf0c4fdf938d9844b82a4f127ab\nexport const relativeTime = (timestamp: number) => {\n  const { language = 'en-US' } = navigator;\n  const formatter = new (Intl as any).RelativeTimeFormat(language, {\n    numeric: 'auto',\n    style: 'long'\n  });\n  const ms = timestamp - Date.now();\n  const years = Math.ceil(ms / 31536e6);\n  if (years) return formatter.format(years, 'year');\n  const months = Math.ceil(ms / 168e6);\n  if (months) return formatter.format(months, 'month');\n  const days = Math.ceil(ms / 864e5);\n  if (days) return formatter.format(days, 'day');\n  const hours = Math.ceil(ms / 36e5);\n  if (hours) return formatter.format(hours, 'hour');\n  const minutes = Math.ceil(ms / 6e4);\n  if (minutes) return formatter.format(minutes, 'minute');\n  const seconds = Math.ceil(ms / 1e3);\n  return formatter.format(seconds, 'second');\n};\n","import React from 'react';\nimport { ShowDrawer } from 'AppShell/types';\nimport Button from 'common/Button';\nimport Input from 'common/Input';\nimport './index.scss';\n\ninterface Props {\n  avatar?: string;\n  showDrawer: ShowDrawer;\n  insideDrawer?: boolean;\n}\n\nconst Header: React.FC<Props> = ({ avatar, showDrawer, insideDrawer }) => {\n  const iconImage = avatar ? { image: avatar } : { icon: 'faUserCircle' };\n  return (\n    <header className=\"header\">\n      <Button\n        {...iconImage}\n        onclick={() => showDrawer({ component: 'account' })}\n        buttonClass=\"btn-user\"\n      />\n      <Input\n        placeholder=\"Search\"\n        leftIcon=\"faSearch\"\n        rightIcon=\"faUserPlus\"\n        onClick={() =>\n          showDrawer({\n            component: 'search',\n            animationIn: 'fadeIn',\n            animationOut: 'fadeOut',\n            animationInDuration: 200,\n            animationOutDuration: 200\n          })\n        }\n        dark={insideDrawer}\n      />\n      <Button icon=\"faRetweet\" buttonClass=\"btn-flip-camera\" />\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { showDrawer } from 'AppShell/duck';\nimport { ShowDrawer } from 'AppShell/types';\nimport { addSnap } from 'features/Snap/duck';\nimport { AddSnap } from 'features/Snap/types';\nimport { Photos } from 'features/Camera/types';\nimport Header from 'common/Header';\nimport './index.scss';\n\ninterface Props {\n  photos: Photos;\n  photoTaken: boolean;\n  showDrawer: ShowDrawer;\n  addSnap: AddSnap;\n  avatar: string;\n}\n\nconst Archive: React.FC<Props> = ({\n  photos,\n  photoTaken,\n  showDrawer,\n  addSnap,\n  avatar\n}) => {\n  const openPhoto = (image) => {\n    addSnap({\n      type: 'photo',\n      url: image\n    });\n    showDrawer({\n      component: 'snap',\n      animationIn: 'zoomIn',\n      animationOut: 'zoomOut',\n      theme: 'dark'\n    });\n  };\n\n  return (\n    <main className=\"archive\">\n      <Header avatar={avatar} showDrawer={showDrawer} insideDrawer />\n\n      {!photoTaken && (\n        <section className=\"message\">\n          <p>Take a photo and it will appear here!</p>\n        </section>\n      )}\n\n      {photos.map(({ month, year, images }) => (\n        <section key={month} className=\"month\">\n          <h3>\n            {month} {year}\n          </h3>\n          {images.map((image, index) => (\n            <img\n              key={image + index}\n              src={image}\n              width={100}\n              alt=\"\"\n              onClick={() => openPhoto(image)}\n            />\n          ))}\n        </section>\n      ))}\n    </main>\n  );\n};\n\nconst mapStateToProps = ({ user, camera }) => ({\n  photos: camera.photos,\n  photoTaken: camera.photoTaken,\n  avatar: user.session.avatar\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  showDrawer: (drawer) => dispatch(showDrawer(drawer)),\n  addSnap: (snap) => dispatch(addSnap(snap))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Archive);\n","export const dummyMessages = [\n  \"Oh wow I can't believe it!\",\n  \"Hahaha you're so right!!\",\n  'No way, when?!',\n  'OMG I totally agree!',\n  \"Umm I'm not so sure about that one\",\n  'Wait, you are actually being serious rn?'\n];\n","export const randomArrayVal = (arr) => arr[Math.floor(Math.random() * arr.length)];\n","export const playSound = (sound: string, audioElem: HTMLAudioElement) => {\n  const soundMap = {\n    newAppMessage: './audio/blip.mp3',\n    cameraShutter: './audio/shutter.mp3'\n  };\n  // IOS no longer allows sounds to be played without a user action\n  // passing an audio tag from the component and setting it's `src` attribute\n  // and then paying it seems to bypass this restriction for now..\n  audioElem.src = soundMap[sound];\n  audioElem.play();\n};\n","import React from 'react';\nimport Button from 'common/Button';\nimport './index.scss';\n\ninterface Props {\n  icons: string[];\n}\n\nconst Pill: React.FC<Props> = ({ icons }) => (\n  <div className=\"pill\">\n    {icons.map((icon) => (\n      <Button key={icon} icon={icon} />\n    ))}\n  </div>\n);\n\nexport default Pill;\n","import React, { useEffect, useLayoutEffect, useState, useRef, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport { getMessages, postMessage } from './duck';\nimport { dummyMessages } from './data';\nimport { hideDrawer } from 'AppShell/duck';\nimport { HideDrawer } from 'AppShell/types';\nimport { Session } from 'features/User/types';\nimport { GetMessages, PostMessage, Message } from 'features/Chat/types';\nimport { randomArrayVal } from 'utils/array';\nimport { playSound } from 'utils/audio';\nimport Input from 'common/Input';\nimport Avatar from 'common/Avatar';\nimport Pill from 'common/Pill';\nimport Button from 'common/Button';\nimport './index.scss';\n\ninterface Props {\n  session: Session;\n  thread: string;\n  messages: Message[];\n  hideDrawer: HideDrawer;\n  getMessages: GetMessages;\n  postMessage: PostMessage;\n}\n\nconst Chat: React.FC<Props> = ({\n  session,\n  thread,\n  messages,\n  hideDrawer,\n  getMessages,\n  postMessage\n}) => {\n  const messageContainer = useRef<HTMLElement>(null);\n  const audioElem = useRef<HTMLAudioElement>(null);\n\n  const [message, setMessage] = useState('');\n  const [typing, setTyping] = useState(false);\n\n  useLayoutEffect(() => {\n    // Scroll to bottom of container on load and each time a new message is posted\n    if (messageContainer.current)\n      messageContainer.current.scrollTop = messageContainer.current.scrollHeight;\n  }, [messages]);\n\n  const botResponse = useCallback(() => {\n    // Randomize the response and typing times to make the bot seem a little more \"realistic\"\n    const responseTimes = [500, 700, 900];\n    const typeTimes = [1200, 1400, 1600];\n    setTimeout(() => setTyping(true), randomArrayVal(responseTimes));\n    setTimeout(() => {\n      setTyping(false);\n      postMessage(thread, randomArrayVal(dummyMessages));\n      if (audioElem.current) playSound('newAppMessage', audioElem.current);\n    }, randomArrayVal(typeTimes));\n  }, [postMessage, thread]);\n\n  useEffect(() => {\n    getMessages(thread);\n    botResponse();\n  }, [thread, getMessages, botResponse]);\n\n  const submitMessage = () => {\n    if (!message.length) return;\n    postMessage(session.username, message);\n    setMessage('');\n    botResponse();\n  };\n\n  return (\n    <main className=\"chat\">\n      <header>\n        <Avatar src=\"./images/bitmoji-other.png\" />\n        <h2>{thread}</h2>\n        <div className=\"right\">\n          <Pill icons={['faPhoneAlt', 'faVideo']} />\n          <Button\n            icon=\"faAngleRight\"\n            onclick={() => hideDrawer('chat')}\n            buttonClass=\"btn-arrow\"\n          />\n        </div>\n      </header>\n\n      <section ref={messageContainer} className=\"messages\">\n        {messages.map(({ author, message, time }, index) => (\n          <article\n            key={time + index}\n            className={classNames('message', {\n              other: author !== session.username\n            })}\n          >\n            <header>{author}</header>\n            <blockquote>{message}</blockquote>\n          </article>\n        ))}\n      </section>\n\n      <footer>\n        <div className={classNames({ typing })}>\n          <Avatar src=\"./images/bitmoji-other.png\" />\n        </div>\n        <div className=\"inner-content\">\n          <Button icon=\"faCamera\" buttonClass=\"btn-camera\" round />\n          <Input\n            placeholder=\"Send a chat\"\n            rightIcon=\"faMicrophone\"\n            onChange={(e: React.SyntheticEvent<HTMLInputElement>) =>\n              setMessage(e.currentTarget.value)\n            }\n            onEnter={submitMessage}\n            onBlur={submitMessage}\n            value={message}\n          />\n          <div className=\"right\">\n            <Button icon=\"faSmileWink\" />\n            <Button icons={['faMobile', 'faMobileAlt']} buttonClass=\"archive-btn\" />\n            <Button icon=\"faRocket\" />\n          </div>\n        </div>\n      </footer>\n\n      <audio ref={audioElem} className=\"app-sound\"></audio>\n    </main>\n  );\n};\n\nconst mapStateToProps = ({ user, chat }) => ({\n  session: user.session,\n  thread: chat.thread,\n  messages: chat.messages\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  hideDrawer: (component) => dispatch(hideDrawer(component)),\n  getMessages: (user) => dispatch(getMessages(user)),\n  postMessage: (author, message) => dispatch(postMessage(author, message))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);\n","import React from 'react';\nimport './index.scss';\n\ninterface Props {\n  count?: number;\n}\n\nconst SkeletonFrame: React.FC<Props> = ({ count = 1 }) => {\n  const nums = new Array(count).fill(null);\n  return (\n    <>\n      {nums.map((num, index) => (\n        <article key={num + index} className=\"skeleton-frame\"></article>\n      ))}\n    </>\n  );\n};\n\nexport default SkeletonFrame;\n","import React from 'react';\nimport './index.scss';\n\ninterface Props {\n  title: string;\n  image: string;\n}\n\nconst Spotlight: React.FC<Props> = ({ title, image }) => (\n  <article className=\"pod spotlight\">\n    <img src={image} alt=\"\" />\n    <div className=\"meta\">\n      <header>{title}</header>\n    </div>\n  </article>\n);\n\nexport default Spotlight;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { api, sleep, debounce } from 'utils/system';\nimport { elemInView } from 'utils/viewport';\nimport { showDrawer } from 'AppShell/duck';\nimport { ShowDrawer } from 'AppShell/types';\nimport Header from 'common/Header';\nimport Widget from 'common/Widget';\nimport Button from 'common/Button';\nimport SkeletonFrame from 'common/SkeletonFrame';\nimport SpotlightPod from 'common/Pod/Spotlight';\nimport './index.scss';\n\ninterface Props {\n  avatar: string;\n  showDrawer: ShowDrawer;\n}\n\nconst Discover: React.FC<Props> = ({ avatar, showDrawer }) => {\n  const [profiles, setProfiles] = useState<any[]>([]);\n  const [page, setPage] = useState(1);\n\n  const loadMore = useRef(null);\n  const isFetching = useRef(false);\n\n  useEffect(() => {\n    (async () => {\n      if (page > 3) return;\n      isFetching.current = true;\n      const [error, response] = await api.get(`/discover/page/${page}.json`);\n      if (!error) {\n        // Simulate slow API response on the first call to show off skeleton frames\n        if (page === 1) await sleep(1000);\n        setProfiles((prevProfiles) => [...prevProfiles, ...response.discover]);\n        isFetching.current = false;\n      }\n    })();\n  }, [page]);\n\n  useEffect(() => {\n    document.querySelector('#discover .content')?.addEventListener(\n      'scroll',\n      debounce(() => {\n        if (!isFetching.current && elemInView(loadMore.current))\n          setPage((prevPage) => prevPage + 1);\n      }, 10)\n    );\n  }, []);\n\n  return (\n    <main className=\"discover\">\n      <Header avatar={avatar} showDrawer={showDrawer} insideDrawer />\n      <section className=\"view\">\n        <Widget className=\"friends\" header=\"Friends\" transparent>\n          <p>Stories from your friends will appear here.</p>\n          <Button label=\"Add Friends\" purple />\n        </Widget>\n        <Widget header=\"For You\" transparent>\n          <div className=\"inner\">\n            {profiles.length ? (\n              profiles.map(({ image, title }, index) => (\n                <SpotlightPod key={index} image={image} title={title} />\n              ))\n            ) : (\n              <SkeletonFrame count={10} />\n            )}\n          </div>\n        </Widget>\n        <div ref={loadMore} className=\"load-more\"></div>\n      </section>\n    </main>\n  );\n};\n\nconst mapStateToProps = ({ user }) => ({ avatar: user.session.avatar });\n\nconst mapDispatchToProps = (dispatch) => ({\n  showDrawer: (component) => dispatch(showDrawer(component))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Discover);\n","// https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\nexport const stretchViewPortHeight = (elem = document.documentElement) => {\n  const viewportHeight = window.innerHeight * 0.01;\n  elem.style.setProperty('--vh', viewportHeight + 'px');\n};\n\nexport const elemInView = (elem, fullyVisible?): boolean => {\n  const position = elem.getBoundingClientRect();\n  const elemTop = position.top;\n  const elemBottom = position.bottom;\n  const isVisible = fullyVisible\n    ? elemTop >= 0 && elemBottom <= window.innerHeight\n    : elemTop < window.innerHeight && elemBottom >= 0;\n  return isVisible;\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Animated } from 'react-animated-css';\nimport { onAnimationComplete } from 'utils/animation';\nimport { Drawer as DrawerType } from '../types';\nimport Account from 'features/Account';\nimport Search from 'features/Search';\nimport SnapMap from 'features/SnapMap';\nimport Snap from 'features/Snap';\nimport Archive from 'features/Archive';\nimport Chat from 'features/Chat';\nimport Discover from 'features/Discover';\nimport './index.scss';\n\ninterface Props {\n  drawers: DrawerType[];\n}\n\nconst Drawer: React.FC<Props> = ({ drawers }) => {\n  const getComponent = (component, show) => {\n    const componentMap = {\n      account: <Account />,\n      search: <Search show={show} />,\n      snapMap: <SnapMap />,\n      snap: <Snap />,\n      archive: <Archive />,\n      chat: <Chat />,\n      discover: <Discover />\n    };\n    return componentMap[component];\n  };\n\n  return drawers\n    ? (drawers as any).map(\n        ({\n          component,\n          animationIn,\n          animationOut,\n          animationInDuration,\n          animationOutDuration,\n          show,\n          theme,\n          position\n        }) => {\n          const elem = document.getElementById(component);\n          if (show) {\n            elem?.classList.remove('collapse');\n          } else {\n            onAnimationComplete(\n              () => elem?.classList.add('collapse'),\n              animationOutDuration\n            );\n          }\n\n          return (\n            <aside\n              id={component}\n              key={component}\n              className={classNames('drawer', {\n                [theme]: true,\n                [position]: true\n              })}\n            >\n              <div className=\"view\">\n                <Animated\n                  animationIn={animationIn}\n                  animationOut={animationOut}\n                  animationInDuration={animationInDuration}\n                  animationOutDuration={animationOutDuration}\n                  isVisible={show}\n                >\n                  <section\n                    className=\"content\"\n                    style={{ height: window.innerHeight + 'px' }}\n                  >\n                    {getComponent(component, show)}\n                  </section>\n                </Animated>\n              </div>\n            </aside>\n          );\n        }\n      )\n    : null;\n};\n\nexport default Drawer;\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Drawer as DrawerType,\n  ShowDrawer,\n  HideDrawer,\n  FooterType,\n  SetFooterType\n} from './types';\nimport { showDrawer, hideDrawer, setFooterType } from './duck';\nimport { getSession, getFriends } from 'features/User/duck';\nimport { getPhotos } from 'features/Camera/duck';\nimport Toolbar from './Toolbar';\nimport Footer from './Footer';\nimport Drawer from './Drawer';\nimport Header from 'common/Header';\n\ninterface Props {\n  drawers: DrawerType[];\n  showDrawer: ShowDrawer;\n  hideDrawer: HideDrawer;\n  footerType: FooterType;\n  setFooterType: SetFooterType;\n  avatar: string;\n  getSession: () => void;\n  getFriends: () => void;\n  getPhotos: () => void;\n  children: JSX.Element;\n}\n\nconst AppShell: React.FC<Props> = ({\n  drawers,\n  showDrawer,\n  hideDrawer,\n  footerType,\n  setFooterType,\n  avatar,\n  getSession,\n  getFriends,\n  getPhotos,\n  children\n}) => {\n  // Init the app\n  useEffect(() => {\n    getSession();\n    getFriends();\n    getPhotos();\n  }, [getSession, getFriends, getPhotos]);\n\n  return (\n    <>\n      <Toolbar drawers={drawers} />\n      <Header avatar={avatar} showDrawer={showDrawer} />\n      <section className=\"view\">{children}</section>\n      {drawers && <Drawer drawers={drawers} />}\n      <Footer\n        footerType={footerType}\n        setFooterType={setFooterType}\n        drawers={drawers}\n        showDrawer={showDrawer}\n        hideDrawer={hideDrawer}\n      />\n    </>\n  );\n};\n\nconst mapStateToProps = ({ app, user, users, media }) => ({\n  users,\n  media,\n  drawers: app.drawers,\n  footerType: app.footerType,\n  avatar: user.session.avatar\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  showDrawer: (component) => dispatch(showDrawer(component)),\n  hideDrawer: (component?) => dispatch(hideDrawer(component)),\n  setFooterType: (footerType) => dispatch(setFooterType(footerType)),\n  getSession: () => dispatch(getSession()),\n  getFriends: () => dispatch(getFriends()),\n  getPhotos: () => dispatch(getPhotos())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppShell);\n","import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport Button from 'common/Button';\nimport { PickPhoto } from '../types';\nimport { isIOS } from 'utils/browser';\nimport { stretchViewPortHeight } from 'utils/viewport';\nimport './index.scss';\n\ninterface Props {\n  takePic: boolean;\n  closePic: () => void;\n  videoElem: HTMLVideoElement;\n  pickPhoto: PickPhoto;\n}\n\nconst PhotoCapture: React.FC<Props> = ({ takePic, closePic, videoElem, pickPhoto }) => {\n  const canvasElem = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    stretchViewPortHeight();\n  }, []);\n\n  const getDataURL = () => canvasElem?.current?.toDataURL('image/png') || '';\n\n  useEffect(() => {\n    const takePhoto = () => {\n      const { innerWidth, innerHeight } = window;\n      const context = canvasElem?.current?.getContext('2d');\n      if (context) {\n        context.canvas.width = innerWidth;\n        context.canvas.height = innerHeight;\n        context.drawImage(videoElem, 0, 0, innerWidth, innerHeight);\n      }\n    };\n    if (takePic) {\n      takePhoto();\n      pickPhoto(getDataURL());\n    }\n  }, [takePic, videoElem, pickPhoto]);\n\n  const downloadPhoto = () => {\n    const dataURL = getDataURL();\n    if (isIOS()) window.open(dataURL, '_blank');\n    else window.location.href = dataURL.replace('image/png', 'image/octet-stream');\n  };\n\n  return (\n    <section\n      className={classNames('photo-capture', {\n        hide: !takePic\n      })}\n    >\n      <div className=\"inner\">\n        <header>\n          <Button icon=\"faTimes\" onclick={closePic} />\n        </header>\n        <canvas ref={canvasElem}></canvas>\n        <aside>\n          <Button icon=\"faTextHeight\" />\n          <Button icon=\"faPen\" />\n          <Button icon=\"faStickyNote\" />\n          <Button icon=\"faCut\" />\n          <Button icon=\"faPaperclip\" />\n          <Button icon=\"faCropAlt\" />\n          <Button icon=\"faStopwatch\" />\n        </aside>\n        <footer>\n          <div className=\"left\">\n            <Button\n              icon=\"faDownload\"\n              label=\"Save\"\n              onclick={downloadPhoto}\n              buttonClass=\"btn-download\"\n            />\n            <Button icon=\"faExternalLinkAlt\" label=\"Story\" />\n          </div>\n          <div className=\"right\">\n            <Button icon=\"faPlayCircle\" label=\"Send To\" />\n          </div>\n        </footer>\n      </div>\n    </section>\n  );\n};\n\nexport default PhotoCapture;\n","export const isIOS = () =>\n  /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport { Animated } from 'react-animated-css';\nimport { promise } from 'utils/system';\nimport { playSound } from 'utils/audio';\nimport { onAnimationComplete } from 'utils/animation';\nimport { setFooterType } from 'AppShell/duck';\nimport { SetFooterType } from 'AppShell/types';\nimport { Filter, FilterScript, PickPhoto } from './types';\nimport { pickPhoto } from './duck';\nimport PhotoCapture from './PhotoCapture';\nimport Button from 'common/Button';\nimport Loader from 'common/Loader';\nimport './index.scss';\n\ndeclare global {\n  interface Window {\n    JEEFACEFILTERAPI: any;\n    Filters: FilterScript;\n  }\n}\n\ninterface Props {\n  setFooterType: SetFooterType;\n  pickPhoto: PickPhoto;\n}\n\nconst defaultFilters: Filter[] = ['dog', 'halloween', 'deform', 'bees', 'liberty'];\n\nconst Camera: React.FC<Props> = ({ setFooterType, pickPhoto }) => {\n  const videoElem = useRef<HTMLVideoElement>(null);\n  const audioElem = useRef<HTMLAudioElement>(null);\n\n  const [loading, setLoading] = useState(false);\n  const [showFilterButtons, setShowFilterButtons] = useState(false);\n  const [filters, setFilters] = useState<Filter[]>(defaultFilters);\n  const [activeFilter, setActiveFilter] = useState<Filter>('');\n  const [filterInitialized, setFilterInitialized] = useState(false);\n  const [cameraStream, setCameraStream] = useState(null);\n  const [takePic, setTakePic] = useState(false);\n\n  useEffect(() => {\n    startCamera();\n  }, []);\n\n  const startCamera = async () => {\n    const navigator: any = window.navigator;\n    const maxWidth = (document.querySelector('#wrapper') as HTMLDivElement)?.offsetWidth;\n\n    if (!('mediaDevices' in navigator)) navigator.mediaDevices = {};\n    if (!('getUserMedia' in navigator.mediaDevices)) {\n      navigator.mediaDevices.getUserMedia = (constraints) => {\n        const getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        if (!getUserMedia)\n          return Promise.reject(new Error('getUserMedia() is not implemented!'));\n        else\n          return new Promise((resolve, reject) =>\n            getUserMedia.call(navigator, constraints, resolve, reject)\n          );\n      };\n    }\n\n    const [error, response] = await promise(\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: { ideal: maxWidth }\n        }\n      })\n    );\n\n    setCameraStream(response);\n    if (!error && videoElem.current) videoElem.current.srcObject = response;\n    else alert(error); //tmp\n  };\n\n  useEffect(() => {\n    if (!activeFilter) return;\n\n    const stopCamera = () =>\n      (cameraStream as any).getTracks().forEach((track) => track.stop());\n\n    window.Filters[activeFilter].init(() => {\n      setFilterInitialized(true);\n      setLoading(false);\n      stopCamera();\n    });\n  }, [activeFilter, cameraStream]);\n\n  // Set the chosen filter at the center of the nav\n  const setActiveFilterButton = (selectFilter: Filter) => {\n    const newFilters = filters.filter((filter) => filter !== selectFilter);\n    newFilters.splice(2, 0, selectFilter);\n    setFilters(newFilters);\n  };\n\n  const switchFilter = async (selectFilter: Filter) => {\n    if (selectFilter === activeFilter) return;\n    setLoading(true);\n    setActiveFilterButton(selectFilter);\n    if (filterInitialized) {\n      const [error] = await promise(window.JEEFACEFILTERAPI.destroy());\n      if (!error) setActiveFilter(selectFilter);\n    } else {\n      setActiveFilter(selectFilter);\n    }\n  };\n\n  const showOpenMouth = (): boolean =>\n    !loading && ['dog', 'halloween'].includes(activeFilter);\n\n  return (\n    <main className=\"camera\">\n      {loading && <Loader message=\"Applying Filter\" fixed />}\n\n      <Animated\n        animationIn=\"tada\"\n        animationOut=\"fadeOut\"\n        animationInDuration={1000}\n        animationOutDuration={0}\n        isVisible={showOpenMouth()}\n        animateOnMount={false}\n      >\n        <div className=\"open-mouth\">\n          <strong>Open Mouth</strong>\n          <span role=\"img\" aria-label=\"tongue emoji\">\n            \n          </span>\n        </div>\n      </Animated>\n\n      <video\n        ref={videoElem}\n        muted\n        playsInline\n        autoPlay\n        className={classNames('video-stream', {\n          hide: filterInitialized || takePic\n        })}\n      ></video>\n\n      <PhotoCapture\n        takePic={takePic}\n        closePic={() => setTakePic(false)}\n        videoElem={videoElem.current as HTMLVideoElement}\n        pickPhoto={pickPhoto}\n      />\n\n      <section className=\"controls\">\n        <Button\n          icon=\"faCircle\"\n          buttonClass=\"btn-capture\"\n          onclick={() => {\n            setTakePic(true);\n            if (audioElem.current) playSound('cameraShutter', audioElem.current);\n          }}\n        />\n\n        {!showFilterButtons && (\n          <Button\n            icon=\"faLaugh\"\n            buttonClass=\"btn-filters\"\n            onclick={() => {\n              setShowFilterButtons(true);\n              setFooterType('none');\n              // Load the center filter on the button list by default\n              onAnimationComplete(() => switchFilter(filters[2]), 100); // 100ms filter button container animation\n            }}\n          />\n        )}\n\n        <Animated\n          animationIn=\"zoomIn\"\n          animationOut=\"zoomOut\"\n          animationInDuration={100}\n          animationOutDuration={100}\n          isVisible={showFilterButtons}\n          animateOnMount={false}\n        >\n          <div className=\"filters\">\n            {filters.map((filter) => (\n              <Button\n                key={filter}\n                image={`./images/filter-${filter}.svg`}\n                buttonClass={`filter-${filter}`}\n                onclick={() => switchFilter(filter)}\n              />\n            ))}\n          </div>\n\n          <div className=\"filter-actions\">\n            <Button icon=\"faMagic\" round />\n            <Button icon=\"faQrcode\" round />\n            <Button\n              icon=\"faTimesCircle\"\n              buttonClass=\"btn-close\"\n              onclick={() => {\n                setActiveFilter('');\n                setShowFilterButtons(false);\n                setFilterInitialized(false);\n                setFooterType('full');\n                startCamera();\n                window.JEEFACEFILTERAPI.destroy();\n              }}\n            />\n            <Button icon=\"faLaugh\" round />\n            <Button icon=\"faSearch\" round />\n          </div>\n        </Animated>\n      </section>\n\n      <audio ref={audioElem} className=\"app-sound\"></audio>\n    </main>\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  setFooterType: (footerType) => dispatch(setFooterType(footerType)),\n  pickPhoto: (dataURL) => dispatch(pickPhoto(dataURL))\n});\n\nexport default connect(null, mapDispatchToProps)(Camera);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Icon from 'common/Icon';\nimport './index.scss';\n\nconst NotFound = () => (\n  <main className=\"not-found\">\n    <div className=\"message\">\n      <h1>Well, this is awkward!</h1>\n      <p>We couldn't find what you were looking for</p>\n      <Link to=\"/\">\n        <Icon icon=\"faSnapchatSquare\" />\n        <span>Go Home</span>\n      </Link>\n    </div>\n  </main>\n);\n\nexport default NotFound;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { createStore, combineReducers, applyMiddleware, compose } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport app from 'AppShell/duck';\nimport user from 'features/User/duck';\nimport snapMap from 'features/SnapMap/duck';\nimport snap from 'features/Snap/duck';\nimport chat from 'features/Chat/duck';\nimport camera from 'features/Camera/duck';\n\nimport AppShell from './AppShell';\nimport Camera from './features/Camera';\nimport NotFound from './features/404';\n\nimport 'normalize.css';\nimport 'animate.css';\nimport './styles/app.scss';\n\nconst rootReducer = combineReducers({ app, user, snapMap, snap, chat, camera });\n\n// Redux devtools extension\n// https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd\nconst composeEnhancers =\n  (typeof window !== 'undefined' &&\n    (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) ||\n  compose;\n\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\n\nconst App = () => (\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <AppShell>\n          <Switch>\n            <Route path=\"/\" exact component={Camera} />\n            <Route component={NotFound} />\n          </Switch>\n        </AppShell>\n      </Router>\n    </Provider>\n  </React.StrictMode>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}